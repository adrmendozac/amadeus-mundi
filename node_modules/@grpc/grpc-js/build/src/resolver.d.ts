import { MethodConfig, ServiceConfig } from './service-config';
import { StatusObject } from './call-interface';
import { SubchannelAddress } from './subchannel-address';
import { GrpcUri } from './uri-parser';
import { ChannelOptions } from './channel-options';
import { Metadata } from './metadata';
import { Status } from './constants';
import { Filter, FilterFactory } from './filter';
export interface CallConfig {
    methodConfig: MethodConfig;
    onCommitted?: () => void;
    pickInformation: {
        [key: string]: string;
    };
    status: Status;
    dynamicFilterFactories: FilterFactory<Filter>[];
}

export interface ConfigSelector {
    (methodName: string, metadata: Metadata): CallConfig;
}

export interface ResolverListener {
    
    onSuccessfulResolution(addressList: SubchannelAddress[], serviceConfig: ServiceConfig | null, serviceConfigError: StatusObject | null, configSelector: ConfigSelector | null, attributes: {
        [key: string]: unknown;
    }): void;
    
    onError(error: StatusObject): void;
}

export interface Resolver {
    
    updateResolution(): void;
    
    destroy(): void;
}
export interface ResolverConstructor {
    new (target: GrpcUri, listener: ResolverListener, channelOptions: ChannelOptions): Resolver;
    
    getDefaultAuthority(target: GrpcUri): string;
}

export declare function registerResolver(scheme: string, resolverClass: ResolverConstructor): void;

export declare function registerDefaultScheme(scheme: string): void;

export declare function createResolver(target: GrpcUri, listener: ResolverListener, options: ChannelOptions): Resolver;

export declare function getDefaultAuthority(target: GrpcUri): string;
export declare function mapUriDefaultScheme(target: GrpcUri): GrpcUri | null;
