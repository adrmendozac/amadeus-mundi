
import { FirebaseError } from '@firebase/util';
import { AuthEvent, AuthEventConsumer, AuthEventType, PopupRedirectResolverInternal } from '../../model/popup_redirect';
import { UserInternal, UserCredentialInternal } from '../../model/user';
import { AuthInternal } from '../../model/auth';

export declare abstract class AbstractPopupRedirectOperation implements AuthEventConsumer {
    protected readonly auth: AuthInternal;
    protected readonly resolver: PopupRedirectResolverInternal;
    protected user?: UserInternal | undefined;
    protected readonly bypassAuthState: boolean;
    private pendingPromise;
    private eventManager;
    readonly filter: AuthEventType[];
    abstract eventId: string | null;
    constructor(auth: AuthInternal, filter: AuthEventType | AuthEventType[], resolver: PopupRedirectResolverInternal, user?: UserInternal | undefined, bypassAuthState?: boolean);
    abstract onExecution(): Promise<void>;
    execute(): Promise<UserCredentialInternal | null>;
    onAuthEvent(event: AuthEvent): Promise<void>;
    onError(error: FirebaseError): void;
    private getIdpTask;
    protected resolve(cred: UserCredentialInternal | null): void;
    protected reject(error: Error): void;
    private unregisterAndCleanUp;
    abstract cleanUp(): void;
}
