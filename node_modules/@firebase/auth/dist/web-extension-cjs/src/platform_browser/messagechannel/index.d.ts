
import { PromiseSettledResult } from './promise';
export declare const enum _TimeoutDuration {
    ACK = 50,
    COMPLETION = 3000,
    LONG_ACK = 800
}

export declare const enum _Status {
    ACK = "ack",
    DONE = "done"
}
export declare const enum _MessageError {
    CONNECTION_CLOSED = "connection_closed",
    CONNECTION_UNAVAILABLE = "connection_unavailable",
    INVALID_RESPONSE = "invalid_response",
    TIMEOUT = "timeout",
    UNKNOWN = "unknown_error",
    UNSUPPORTED_EVENT = "unsupported_event"
}

export declare const enum _EventType {
    KEY_CHANGED = "keyChanged",
    PING = "ping"
}

export interface KeyChangedResponse {
    keyProcessed: boolean;
}

export type _PingResponse = _EventType[];
export type _ReceiverResponse = KeyChangedResponse | _PingResponse;
interface MessageEvent {
    eventType: _EventType;
    eventId: string;
}

export interface KeyChangedRequest {
    key: string;
}

export interface PingRequest {
}

export type _SenderRequest = KeyChangedRequest | PingRequest;

export interface ReceiverHandler<T extends _ReceiverResponse, S extends _SenderRequest> {
    (origin: string, data: S): T | Promise<T>;
}

export interface SenderMessageEvent<T extends _SenderRequest> extends MessageEvent {
    data: T;
}
export type _ReceiverMessageResponse<T extends _ReceiverResponse> = Array<PromiseSettledResult<T>> | null;

export interface ReceiverMessageEvent<T extends _ReceiverResponse> extends MessageEvent {
    status: _Status;
    response: _ReceiverMessageResponse<T>;
}
export {};
