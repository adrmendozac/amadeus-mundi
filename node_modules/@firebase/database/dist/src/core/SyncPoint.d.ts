
import { ReferenceConstructor } from '../api/Reference';
import { Operation } from './operation/Operation';
import { Node } from './snap/Node';
import { Path } from './util/Path';
import { Event } from './view/Event';
import { EventRegistration, QueryContext } from './view/EventRegistration';
import { View } from './view/View';
import { WriteTreeRef } from './WriteTree';

export declare class SyncPoint {
    
    readonly views: Map<string, View>;
}
export declare function syncPointSetReferenceConstructor(val: ReferenceConstructor): void;
export declare function syncPointIsEmpty(syncPoint: SyncPoint): boolean;
export declare function syncPointApplyOperation(syncPoint: SyncPoint, operation: Operation, writesCache: WriteTreeRef, optCompleteServerCache: Node | null): Event[];

export declare function syncPointGetView(syncPoint: SyncPoint, query: QueryContext, writesCache: WriteTreeRef, serverCache: Node | null, serverCacheComplete: boolean): View;

export declare function syncPointAddEventRegistration(syncPoint: SyncPoint, query: QueryContext, eventRegistration: EventRegistration, writesCache: WriteTreeRef, serverCache: Node | null, serverCacheComplete: boolean): Event[];

export declare function syncPointRemoveEventRegistration(syncPoint: SyncPoint, query: QueryContext, eventRegistration: EventRegistration | null, cancelError?: Error): {
    removed: QueryContext[];
    events: Event[];
};
export declare function syncPointGetQueryViews(syncPoint: SyncPoint): View[];

export declare function syncPointGetCompleteServerCache(syncPoint: SyncPoint, path: Path): Node | null;
export declare function syncPointViewForQuery(syncPoint: SyncPoint, query: QueryContext): View | null;
export declare function syncPointViewExistsForQuery(syncPoint: SyncPoint, query: QueryContext): boolean;
export declare function syncPointHasCompleteView(syncPoint: SyncPoint): boolean;
export declare function syncPointGetCompleteView(syncPoint: SyncPoint): View | null;
