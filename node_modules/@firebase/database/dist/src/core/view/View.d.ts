
import { Operation } from '../operation/Operation';
import { Node } from '../snap/Node';
import { Path } from '../util/Path';
import { WriteTreeRef } from '../WriteTree';
import { Event } from './Event';
import { EventGenerator } from './EventGenerator';
import { EventRegistration, QueryContext } from './EventRegistration';
import { ViewCache } from './ViewCache';
import { ViewProcessor } from './ViewProcessor';

export declare class View {
    private query_;
    processor_: ViewProcessor;
    viewCache_: ViewCache;
    eventRegistrations_: EventRegistration[];
    eventGenerator_: EventGenerator;
    constructor(query_: QueryContext, initialViewCache: ViewCache);
    get query(): QueryContext;
}
export declare function viewGetServerCache(view: View): Node | null;
export declare function viewGetCompleteNode(view: View): Node | null;
export declare function viewGetCompleteServerCache(view: View, path: Path): Node | null;
export declare function viewIsEmpty(view: View): boolean;
export declare function viewAddEventRegistration(view: View, eventRegistration: EventRegistration): void;

export declare function viewRemoveEventRegistration(view: View, eventRegistration: EventRegistration | null, cancelError?: Error): Event[];

export declare function viewApplyOperation(view: View, operation: Operation, writesCache: WriteTreeRef, completeServerCache: Node | null): Event[];
export declare function viewGetInitialEvents(view: View, registration: EventRegistration): Event[];
