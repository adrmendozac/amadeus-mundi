
import { RepoInfo } from '../core/RepoInfo';
import { Transport } from './Transport';
export declare function setWebSocketImpl(impl: any): void;

export declare class WebSocketConnection implements Transport {
    connId: string;
    private applicationId?;
    private appCheckToken?;
    private authToken?;
    keepaliveTimer: number | null;
    frames: string[] | null;
    totalFrames: number;
    bytesSent: number;
    bytesReceived: number;
    connURL: string;
    onDisconnect: (a?: boolean) => void;
    onMessage: (msg: {}) => void;
    mySock: WebSocket | null;
    private log_;
    private stats_;
    private everConnected_;
    private isClosed_;
    private nodeAdmin;
    
    constructor(connId: string, repoInfo: RepoInfo, applicationId?: string, appCheckToken?: string, authToken?: string, transportSessionId?: string, lastSessionId?: string);
    
    private static connectionURL_;
    
    open(onMessage: (msg: {}) => void, onDisconnect: (a?: boolean) => void): void;
    
    start(): void;
    static forceDisallow_: boolean;
    static forceDisallow(): void;
    static isAvailable(): boolean;
    
    static responsesRequiredToBeHealthy: number;
    
    static healthyTimeout: number;
    
    static previouslyFailed(): boolean;
    markConnectionHealthy(): void;
    private appendFrame_;
    
    private handleNewFrameCount_;
    
    private extractFrameCount_;
    
    handleIncomingFrame(mess: {
        [k: string]: unknown;
    }): void;
    
    send(data: {}): void;
    private shutdown_;
    private onClosed_;
    
    close(): void;
    
    resetKeepAlive(): void;
    
    private sendString_;
}
