
import { StorageError } from './error';
import { Headers, Connection, ConnectionType } from './connection';

export interface UrlParams {
    [name: string]: string | number;
}

export type RequestHandler<I extends ConnectionType, O> = (connection: Connection<I>, response: I) => O;

export type ErrorHandler = (connection: Connection<ConnectionType>, response: StorageError) => StorageError;

export declare class RequestInfo<I extends ConnectionType, O> {
    url: string;
    method: string;
    
    handler: RequestHandler<I, O>;
    timeout: number;
    urlParams: UrlParams;
    headers: Headers;
    body: Blob | string | Uint8Array | null;
    errorHandler: ErrorHandler | null;
    
    progressCallback: ((p1: number, p2: number) => void) | null;
    successCodes: number[];
    additionalRetryCodes: number[];
    constructor(url: string, method: string, 
    
    handler: RequestHandler<I, O>, timeout: number);
}
