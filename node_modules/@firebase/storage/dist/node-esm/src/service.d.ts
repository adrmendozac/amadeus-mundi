
import { Location } from './implementation/location';
import { Request } from './implementation/request';
import { RequestInfo } from './implementation/requestinfo';
import { Reference } from './reference';
import { Provider } from '@firebase/component';
import { FirebaseAuthInternalName } from '@firebase/auth-interop-types';
import { AppCheckInternalComponentName } from '@firebase/app-check-interop-types';
import { FirebaseApp } from '@firebase/app';
import { FirebaseStorage } from './public-types';
import { EmulatorMockTokenOptions } from '@firebase/util';
import { Connection, ConnectionType } from './implementation/connection';
export declare function isUrl(path?: string): boolean;

export declare function ref(storage: FirebaseStorageImpl, url?: string): Reference;

export declare function ref(storageOrRef: FirebaseStorageImpl | Reference, path?: string): Reference;
export declare function connectStorageEmulator(storage: FirebaseStorageImpl, host: string, port: number, options?: {
    mockUserToken?: EmulatorMockTokenOptions | string;
}): void;

export declare class FirebaseStorageImpl implements FirebaseStorage {
    
    readonly app: FirebaseApp;
    readonly _authProvider: Provider<FirebaseAuthInternalName>;
    
    readonly _appCheckProvider: Provider<AppCheckInternalComponentName>;
    
    readonly _url?: string | undefined;
    readonly _firebaseVersion?: string | undefined;
    _isUsingEmulator: boolean;
    _bucket: Location | null;
    
    private _host;
    _protocol: string;
    protected readonly _appId: string | null;
    private readonly _requests;
    private _deleted;
    private _maxOperationRetryTime;
    private _maxUploadRetryTime;
    _overrideAuthToken?: string;
    constructor(
    
    app: FirebaseApp, _authProvider: Provider<FirebaseAuthInternalName>, 
    
    _appCheckProvider: Provider<AppCheckInternalComponentName>, 
    
    _url?: string | undefined, _firebaseVersion?: string | undefined, _isUsingEmulator?: boolean);
    
    get host(): string;
    set host(host: string);
    
    get maxUploadRetryTime(): number;
    set maxUploadRetryTime(time: number);
    
    get maxOperationRetryTime(): number;
    set maxOperationRetryTime(time: number);
    _getAuthToken(): Promise<string | null>;
    _getAppCheckToken(): Promise<string | null>;
    
    _delete(): Promise<void>;
    
    _makeStorageReference(loc: Location): Reference;
    
    _makeRequest<I extends ConnectionType, O>(requestInfo: RequestInfo<I, O>, requestFactory: () => Connection<I>, authToken: string | null, appCheckToken: string | null, retry?: boolean): Request<O>;
    makeRequestWithTokens<I extends ConnectionType, O>(requestInfo: RequestInfo<I, O>, requestFactory: () => Connection<I>): Promise<O>;
}
