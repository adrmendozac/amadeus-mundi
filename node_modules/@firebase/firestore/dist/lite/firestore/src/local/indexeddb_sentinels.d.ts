
import { BatchId, TargetId } from '../core/types';
import { ResourcePath } from '../model/path';
import { EncodedResourcePath } from './encoded_resource_path';
import { DbDocumentMutation } from './indexeddb_schema';

export type DbTimestampKey = [ number,  number];
export type DbPrimaryClientKey = typeof DbPrimaryClientKey;

export declare const DbPrimaryClientStore = "owner";

export declare const DbPrimaryClientKey = "owner";

export type DbMutationQueueKey = string;

export declare const DbMutationQueueStore = "mutationQueues";

export declare const DbMutationQueueKeyPath = "userId";

export type DbMutationBatchKey = BatchId;

export declare const DbMutationBatchStore = "mutations";

export declare const DbMutationBatchKeyPath = "batchId";

export declare const DbMutationBatchUserMutationsIndex = "userMutationsIndex";

export declare const DbMutationBatchUserMutationsKeyPath: string[];

export type DbDocumentMutationKey = [string, EncodedResourcePath, BatchId];

export declare function newDbDocumentMutationPrefixForUser(userId: string): [string];

export declare function newDbDocumentMutationPrefixForPath(userId: string, path: ResourcePath): [string, EncodedResourcePath];

export declare function newDbDocumentMutationKey(userId: string, path: ResourcePath, batchId: BatchId): DbDocumentMutationKey;

export declare const DbDocumentMutationPlaceholder: DbDocumentMutation;
export declare const DbDocumentMutationStore = "documentMutations";
export declare const DbRemoteDocumentStore = "remoteDocumentsV14";

export type DbRemoteDocumentKey = [
     string[],
     string,
     DbTimestampKey,
     string
];

export declare const DbRemoteDocumentKeyPath: string[];

export declare const DbRemoteDocumentDocumentKeyIndex = "documentKeyIndex";
export declare const DbRemoteDocumentDocumentKeyIndexPath: string[];

export declare const DbRemoteDocumentCollectionGroupIndex = "collectionGroupIndex";
export declare const DbRemoteDocumentCollectionGroupIndexPath: string[];
export declare const DbRemoteDocumentGlobalStore = "remoteDocumentGlobal";
export declare const DbRemoteDocumentGlobalKey = "remoteDocumentGlobalKey";
export type DbRemoteDocumentGlobalKey = typeof DbRemoteDocumentGlobalKey;

export type DbTargetKey = TargetId;
export declare const DbTargetStore = "targets";

export declare const DbTargetKeyPath = "targetId";

export declare const DbTargetQueryTargetsIndexName = "queryTargetsIndex";

export declare const DbTargetQueryTargetsKeyPath: string[];

export type DbTargetDocumentKey = [TargetId, EncodedResourcePath];

export declare const DbTargetDocumentStore = "targetDocuments";

export declare const DbTargetDocumentKeyPath: string[];

export declare const DbTargetDocumentDocumentTargetsIndex = "documentTargetsIndex";

export declare const DbTargetDocumentDocumentTargetsKeyPath: string[];

export type DbTargetGlobalKey = typeof DbTargetGlobalKey;

export declare const DbTargetGlobalKey = "targetGlobalKey";
export declare const DbTargetGlobalStore = "targetGlobal";

export type DbCollectionParentKey = [string, EncodedResourcePath];

export declare const DbCollectionParentStore = "collectionParents";

export declare const DbCollectionParentKeyPath: string[];

export declare const DbClientMetadataStore = "clientMetadata";

export declare const DbClientMetadataKeyPath = "clientId";

export type DbClientMetadataKey = string;
export type DbBundlesKey = string;

export declare const DbBundleStore = "bundles";
export declare const DbBundleKeyPath = "bundleId";
export type DbNamedQueriesKey = string;

export declare const DbNamedQueryStore = "namedQueries";
export declare const DbNamedQueryKeyPath = "name";

export type DbIndexConfigurationKey = number;

export declare const DbIndexConfigurationStore = "indexConfiguration";
export declare const DbIndexConfigurationKeyPath = "indexId";

export declare const DbIndexConfigurationCollectionGroupIndex = "collectionGroupIndex";
export declare const DbIndexConfigurationCollectionGroupIndexPath = "collectionGroup";

export type DbIndexStateKey = [number, string];

export declare const DbIndexStateStore = "indexState";
export declare const DbIndexStateKeyPath: string[];

export declare const DbIndexStateSequenceNumberIndex = "sequenceNumberIndex";
export declare const DbIndexStateSequenceNumberIndexPath: string[];

export type KeySafeBytes = Uint8Array | string;

export type DbIndexEntryKey = [
    number,
    string,
    KeySafeBytes,
    KeySafeBytes,
    KeySafeBytes,
    string[]
];

export declare const DbIndexEntryStore = "indexEntries";
export declare const DbIndexEntryKeyPath: string[];
export declare const DbIndexEntryDocumentKeyIndex = "documentKeyIndex";
export declare const DbIndexEntryDocumentKeyIndexPath: string[];
export type DbDocumentOverlayKey = [
    string,
    string,
    string
];

export declare const DbDocumentOverlayStore = "documentOverlays";
export declare const DbDocumentOverlayKeyPath: string[];
export declare const DbDocumentOverlayCollectionPathOverlayIndex = "collectionPathOverlayIndex";
export declare const DbDocumentOverlayCollectionPathOverlayIndexPath: string[];
export declare const DbDocumentOverlayCollectionGroupOverlayIndex = "collectionGroupOverlayIndex";
export declare const DbDocumentOverlayCollectionGroupOverlayIndexPath: string[];

export declare const DbGlobalsStore = "globals";
export declare const DbGlobalsKeyPath = "name";

export type DbGlobalsKey = 'sessionToken';
export declare const V1_STORES: string[];
export declare const V3_STORES: string[];
export declare const V4_STORES: string[];
export declare const V6_STORES: string[];
export declare const V8_STORES: string[];
export declare const V11_STORES: string[];
export declare const V12_STORES: string[];
export declare const V13_STORES: string[];
export declare const V14_STORES: string[];
export declare const V15_STORES: string[];
export declare const V16_STORES: string[];
export declare const V17_STORES: string[];
export declare const V18_STORES: string[];

export declare const ALL_STORES: string[];

export declare function getObjectStores(schemaVersion: number): string[];
