
import { BatchId, MutationBatchState, TargetId } from '../core/types';
import { FirestoreError } from '../util/error';
import { ClientId } from './shared_client_state';

export type QueryTargetState = 'not-current' | 'current' | 'rejected';

export interface SharedClientStateSyncer {
    
    applyBatchState(batchId: BatchId, state: MutationBatchState, error?: FirestoreError): Promise<void>;
    
    applyTargetState(targetId: TargetId, state: QueryTargetState, error?: FirestoreError): Promise<void>;
    
    applyActiveTargetsChange(added: TargetId[], removed: TargetId[]): Promise<void>;
    
    getActiveClients(): Promise<ClientId[]>;
    
    synchronizeWithChangedDocuments(collectionGroup: string): Promise<void>;
}
