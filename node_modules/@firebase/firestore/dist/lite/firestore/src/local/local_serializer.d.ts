
import { BundleMetadata, NamedQuery } from '../core/bundle';
import { Query } from '../core/query';
import { SnapshotVersion } from '../core/snapshot_version';
import { MutableDocument } from '../model/document';
import { DocumentKey } from '../model/document_key';
import { FieldIndex, IndexOffset } from '../model/field_index';
import { MutationBatch } from '../model/mutation_batch';
import { Overlay } from '../model/overlay';
import { BundledQuery as ProtoBundledQuery, BundleMetadata as ProtoBundleMetadata, NamedQuery as ProtoNamedQuery } from '../protos/firestore_bundle_proto';
import { JsonProtoSerializer } from '../remote/serializer';
import { DbBundle, DbDocumentOverlay, DbIndexConfiguration, DbIndexState, DbMutationBatch, DbNamedQuery, DbRemoteDocument, DbTarget, DbTimestamp } from './indexeddb_schema';
import { DbDocumentOverlayKey, DbTimestampKey } from './indexeddb_sentinels';
import { TargetData } from './target_data';

export declare class LocalSerializer {
    readonly remoteSerializer: JsonProtoSerializer;
    constructor(remoteSerializer: JsonProtoSerializer);
}

export declare function fromDbRemoteDocument(localSerializer: LocalSerializer, remoteDoc: DbRemoteDocument): MutableDocument;

export declare function toDbRemoteDocument(localSerializer: LocalSerializer, document: MutableDocument): DbRemoteDocument;
export declare function toDbTimestampKey(snapshotVersion: SnapshotVersion): DbTimestampKey;
export declare function fromDbTimestampKey(dbTimestampKey: DbTimestampKey): SnapshotVersion;
export declare function toDbTimestamp(snapshotVersion: SnapshotVersion): DbTimestamp;

export declare function toDbMutationBatch(localSerializer: LocalSerializer, userId: string, batch: MutationBatch): DbMutationBatch;

export declare function fromDbMutationBatch(localSerializer: LocalSerializer, dbBatch: DbMutationBatch): MutationBatch;

export declare function fromDbTarget(dbTarget: DbTarget): TargetData;

export declare function toDbTarget(localSerializer: LocalSerializer, targetData: TargetData): DbTarget;

export declare function fromDbBundle(dbBundle: DbBundle): BundleMetadata;

export declare function toDbBundle(metadata: ProtoBundleMetadata): DbBundle;

export declare function fromDbNamedQuery(dbNamedQuery: DbNamedQuery): NamedQuery;

export declare function toDbNamedQuery(query: ProtoNamedQuery): DbNamedQuery;

export declare function fromBundledQuery(bundledQuery: ProtoBundledQuery): Query;

export declare function fromProtoNamedQuery(namedQuery: ProtoNamedQuery): NamedQuery;

export declare function fromBundleMetadata(metadata: ProtoBundleMetadata): BundleMetadata;

export declare function fromDbDocumentOverlay(localSerializer: LocalSerializer, dbDocumentOverlay: DbDocumentOverlay): Overlay;

export declare function toDbDocumentOverlay(localSerializer: LocalSerializer, userId: string, overlay: Overlay): DbDocumentOverlay;

export declare function toDbDocumentOverlayKey(userId: string, docKey: DocumentKey): DbDocumentOverlayKey;
export declare function toDbIndexConfiguration(index: FieldIndex): DbIndexConfiguration;
export declare function fromDbIndexConfiguration(index: DbIndexConfiguration, state: DbIndexState | null): FieldIndex;
export declare function toDbIndexState(indexId: number, uid: string, sequenceNumber: number, offset: IndexOffset): DbIndexState;
