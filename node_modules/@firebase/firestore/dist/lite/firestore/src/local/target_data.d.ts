
import { SnapshotVersion } from '../core/snapshot_version';
import { Target } from '../core/target';
import { ListenSequenceNumber, TargetId } from '../core/types';
import { ByteString } from '../util/byte_string';

export declare const enum TargetPurpose {
    
    Listen = "TargetPurposeListen",
    
    ExistenceFilterMismatch = "TargetPurposeExistenceFilterMismatch",
    
    ExistenceFilterMismatchBloom = "TargetPurposeExistenceFilterMismatchBloom",
    
    LimboResolution = "TargetPurposeLimboResolution"
}

export declare class TargetData {
    
    readonly target: Target;
    
    readonly targetId: TargetId;
    
    readonly purpose: TargetPurpose;
    
    readonly sequenceNumber: ListenSequenceNumber;
    
    readonly snapshotVersion: SnapshotVersion;
    
    readonly lastLimboFreeSnapshotVersion: SnapshotVersion;
    
    readonly resumeToken: ByteString;
    
    readonly expectedCount: number | null;
    constructor(
    
    target: Target, 
    
    targetId: TargetId, 
    
    purpose: TargetPurpose, 
    
    sequenceNumber: ListenSequenceNumber, 
    
    snapshotVersion?: SnapshotVersion, 
    
    lastLimboFreeSnapshotVersion?: SnapshotVersion, 
    
    resumeToken?: ByteString, 
    
    expectedCount?: number | null);
    
    withSequenceNumber(sequenceNumber: number): TargetData;
    
    withResumeToken(resumeToken: ByteString, snapshotVersion: SnapshotVersion): TargetData;
    
    withExpectedCount(expectedCount: number): TargetData;
    
    withLastLimboFreeSnapshotVersion(lastLimboFreeSnapshotVersion: SnapshotVersion): TargetData;
}
