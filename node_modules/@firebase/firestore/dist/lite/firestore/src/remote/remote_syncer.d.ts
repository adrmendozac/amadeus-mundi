
import { User } from '../auth/user';
import { BatchId, TargetId } from '../core/types';
import { DocumentKeySet } from '../model/collections';
import { MutationBatchResult } from '../model/mutation_batch';
import { FirestoreError } from '../util/error';
import { RemoteEvent } from './remote_event';

export interface RemoteSyncer {
    
    applyRemoteEvent?(remoteEvent: RemoteEvent): Promise<void>;
    
    rejectListen?(targetId: TargetId, error: FirestoreError): Promise<void>;
    
    applySuccessfulWrite?(result: MutationBatchResult): Promise<void>;
    
    rejectFailedWrite?(batchId: BatchId, error: FirestoreError): Promise<void>;
    
    getRemoteKeysForTarget?(targetId: TargetId): DocumentKeySet;
    
    handleCredentialChange?(user: User): Promise<void>;
}
