
import { Firestore } from '../api/database';
import { Query } from '../core/query';
import { DocumentData } from '../lite-api/reference';
import { Timestamp } from '../lite-api/timestamp';
import { DocumentKey } from '../model/document_key';

export declare class BundleBuilder {
    private firestore;
    readonly bundleId: string;
    private documents;
    private namedQueries;
    private latestReadTime;
    private databaseId;
    private readonly serializer;
    private readonly userDataReader;
    constructor(firestore: Firestore, bundleId: string);
    
    addBundleDocument(docBundleData: DocumentSnapshotBundleData, queryName?: string): void;
    
    addBundleQuery(queryBundleData: QuerySnapshotBundleData): void;
    
    private toBundleDocument;
    
    private lengthPrefixedString;
    
    build(): string;
}

export interface DocumentSnapshotBundleData {
    documentData: DocumentData;
    documentKey: DocumentKey;
    documentPath: string;
    documentExists: boolean;
    createdTime: Timestamp;
    readTime?: Timestamp;
    versionTime: Timestamp;
}

export interface QuerySnapshotBundleData {
    name: string;
    query: Query;
    parent: string;
    docBundleDataArray: DocumentSnapshotBundleData[];
}
