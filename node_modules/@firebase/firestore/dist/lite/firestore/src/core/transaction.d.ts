
import { ParsedSetData, ParsedUpdateData } from '../lite-api/user_data_reader';
import { Document } from '../model/document';
import { DocumentKey } from '../model/document_key';
import { Datastore } from '../remote/datastore';

export declare class Transaction {
    private datastore;
    private readVersions;
    private mutations;
    private committed;
    
    private lastTransactionError;
    
    private writtenDocs;
    constructor(datastore: Datastore);
    lookup(keys: DocumentKey[]): Promise<Document[]>;
    set(key: DocumentKey, data: ParsedSetData): void;
    update(key: DocumentKey, data: ParsedUpdateData): void;
    delete(key: DocumentKey): void;
    commit(): Promise<void>;
    private recordVersion;
    
    private precondition;
    
    private preconditionForUpdate;
    private write;
    private ensureCommitNotCalled;
}
