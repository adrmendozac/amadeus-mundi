
import { BundleElement, BundleMetadata } from '../protos/firestore_bundle_proto';
import { JsonProtoSerializer } from '../remote/serializer';

export declare class SizedBundleElement {
    readonly payload: BundleElement;
    readonly byteLength: number;
    constructor(payload: BundleElement, byteLength: number);
    isBundleMetadata(): boolean;
}
export type BundleSource = ReadableStream<Uint8Array> | ArrayBuffer | Uint8Array;

export interface BundleReader {
    serializer: JsonProtoSerializer;
    close(): Promise<void>;
    
    getMetadata(): Promise<BundleMetadata>;
    
    nextElement(): Promise<SizedBundleElement | null>;
}

export interface BundleReaderSync {
    serializer: JsonProtoSerializer;
    
    getMetadata(): BundleMetadata;
    
    getElements(): SizedBundleElement[];
}
