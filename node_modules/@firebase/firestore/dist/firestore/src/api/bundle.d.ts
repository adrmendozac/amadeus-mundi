
import { FirestoreError } from '../util/error';

export type TaskState = 'Error' | 'Running' | 'Success';

export interface LoadBundleTaskProgress {
    
    documentsLoaded: number;
    
    totalDocuments: number;
    
    bytesLoaded: number;
    
    totalBytes: number;
    
    taskState: TaskState;
}

export declare class LoadBundleTask implements PromiseLike<LoadBundleTaskProgress> {
    private _progressObserver;
    private _taskCompletionResolver;
    private _lastProgress;
    
    onProgress(next?: (progress: LoadBundleTaskProgress) => unknown, error?: (err: Error) => unknown, complete?: () => void): void;
    
    catch<R>(onRejected: (a: Error) => R | PromiseLike<R>): Promise<R | LoadBundleTaskProgress>;
    
    then<T, R>(onFulfilled?: (a: LoadBundleTaskProgress) => T | PromiseLike<T>, onRejected?: (a: Error) => R | PromiseLike<R>): Promise<T | R>;
    
    _completeWith(progress: LoadBundleTaskProgress): void;
    
    _failWith(error: FirestoreError): void;
    
    _updateProgress(progress: LoadBundleTaskProgress): void;
}
