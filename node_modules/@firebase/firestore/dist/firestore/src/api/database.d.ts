
import { FirebaseApp } from '@firebase/app';
import { User } from '../auth/user';
import { OfflineComponentProviderFactory, OnlineComponentProviderFactory } from '../core/component_provider';
import { DatabaseId } from '../core/database_info';
import { FirestoreClient } from '../core/firestore_client';
import { Firestore as LiteFirestore } from '../lite-api/database';
import { Query } from '../lite-api/reference';
import { AsyncQueue } from '../util/async_queue';
import { LoadBundleTask } from './bundle';
import { CredentialsProvider } from './credentials';
import { FirestoreSettings, PersistenceSettings } from './settings';
export { connectFirestoreEmulator, EmulatorMockTokenOptions } from '../lite-api/database';
declare module '@firebase/component' {
    interface NameServiceMapping {
        'firestore': Firestore;
    }
}

export declare const CACHE_SIZE_UNLIMITED = -1;

export declare class Firestore extends LiteFirestore {
    
    type: 'firestore-lite' | 'firestore';
    _queue: AsyncQueue;
    readonly _persistenceKey: string;
    _firestoreClient: FirestoreClient | undefined;
    _componentsProvider?: {
        _offline: OfflineComponentProviderFactory;
        _online: OnlineComponentProviderFactory;
    };
    
    constructor(authCredentialsProvider: CredentialsProvider<User>, appCheckCredentialsProvider: CredentialsProvider<string>, databaseId: DatabaseId, app?: FirebaseApp);
    protected _terminate(): Promise<void>;
}

export declare function initializeFirestore(app: FirebaseApp, settings: FirestoreSettings, databaseId?: string): Firestore;

export declare function getFirestore(): Firestore;

export declare function getFirestore(app: FirebaseApp): Firestore;

export declare function getFirestore(databaseId: string): Firestore;

export declare function getFirestore(app: FirebaseApp, databaseId: string): Firestore;

export declare function ensureFirestoreConfigured(firestore: Firestore): FirestoreClient;
export declare function configureFirestore(firestore: Firestore): void;

export declare function enableIndexedDbPersistence(firestore: Firestore, persistenceSettings?: PersistenceSettings): Promise<void>;

export declare function enableMultiTabIndexedDbPersistence(firestore: Firestore): Promise<void>;

export declare function clearIndexedDbPersistence(firestore: Firestore): Promise<void>;

export declare function waitForPendingWrites(firestore: Firestore): Promise<void>;

export declare function enableNetwork(firestore: Firestore): Promise<void>;

export declare function disableNetwork(firestore: Firestore): Promise<void>;

export declare function terminate(firestore: Firestore): Promise<void>;

export declare function loadBundle(firestore: Firestore, bundleData: ReadableStream<Uint8Array> | ArrayBuffer | string): LoadBundleTask;

export declare function namedQuery(firestore: Firestore, name: string): Promise<Query | null>;
