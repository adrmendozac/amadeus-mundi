
import { ComponentContainer } from '@firebase/component';
import { FirebaseApp } from './public-types';
import { HeartbeatsByUserAgent, HeartbeatService, HeartbeatsInIndexedDB, HeartbeatStorage, SingleDateHeartbeat } from './types';
export declare const MAX_NUM_STORED_HEARTBEATS = 30;
export declare class HeartbeatServiceImpl implements HeartbeatService {
    private readonly container;
    
    _storage: HeartbeatStorageImpl;
    
    _heartbeatsCache: HeartbeatsInIndexedDB | null;
    
    _heartbeatsCachePromise: Promise<HeartbeatsInIndexedDB>;
    constructor(container: ComponentContainer);
    
    triggerHeartbeat(): Promise<void>;
    
    getHeartbeatsHeader(): Promise<string>;
}
export declare function extractHeartbeatsForHeader(heartbeatsCache: SingleDateHeartbeat[], maxSize?: number): {
    heartbeatsToSend: HeartbeatsByUserAgent[];
    unsentEntries: SingleDateHeartbeat[];
};
export declare class HeartbeatStorageImpl implements HeartbeatStorage {
    app: FirebaseApp;
    private _canUseIndexedDBPromise;
    constructor(app: FirebaseApp);
    runIndexedDBEnvironmentCheck(): Promise<boolean>;
    
    read(): Promise<HeartbeatsInIndexedDB>;
    overwrite(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void>;
    add(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void>;
}

export declare function countBytes(heartbeatsCache: HeartbeatsByUserAgent[]): number;

export declare function getEarliestHeartbeatIdx(heartbeats: SingleDateHeartbeat[]): number;
