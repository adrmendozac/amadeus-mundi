

export interface LanguageModel extends EventTarget {
    create(options?: LanguageModelCreateOptions): Promise<LanguageModel>;
    availability(options?: LanguageModelCreateCoreOptions): Promise<Availability>;
    prompt(input: LanguageModelPrompt, options?: LanguageModelPromptOptions): Promise<string>;
    promptStreaming(input: LanguageModelPrompt, options?: LanguageModelPromptOptions): ReadableStream;
    measureInputUsage(input: LanguageModelPrompt, options?: LanguageModelPromptOptions): Promise<number>;
    destroy(): undefined;
}

export declare enum Availability {
    'UNAVAILABLE' = "unavailable",
    'DOWNLOADABLE' = "downloadable",
    'DOWNLOADING' = "downloading",
    'AVAILABLE' = "available"
}

export interface LanguageModelCreateCoreOptions {
    topK?: number;
    temperature?: number;
    expectedInputs?: LanguageModelExpected[];
}

export interface LanguageModelCreateOptions extends LanguageModelCreateCoreOptions {
    signal?: AbortSignal;
    initialPrompts?: LanguageModelMessage[];
}

export interface LanguageModelPromptOptions {
    responseConstraint?: object;
}
 export interface LanguageModelExpected {
    type: LanguageModelMessageType;
    languages?: string[];
}

export type LanguageModelPrompt = LanguageModelMessage[];

export interface LanguageModelMessage {
    role: LanguageModelMessageRole;
    content: LanguageModelMessageContent[];
}

export interface LanguageModelMessageContent {
    type: LanguageModelMessageType;
    value: LanguageModelMessageContentValue;
}

export type LanguageModelMessageRole = 'system' | 'user' | 'assistant';

export type LanguageModelMessageType = 'text' | 'image' | 'audio';

export type LanguageModelMessageContentValue = ImageBitmapSource | AudioBuffer | BufferSource | string;
