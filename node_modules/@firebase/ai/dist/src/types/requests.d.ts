
import { ObjectSchema, TypedSchema } from '../requests/schema-builder';
import { Content, Part } from './content';
import { LanguageModelCreateOptions, LanguageModelPromptOptions } from './language-model';
import { FunctionCallingMode, HarmBlockMethod, HarmBlockThreshold, HarmCategory, InferenceMode, ResponseModality } from './enums';
import { ObjectSchemaRequest, SchemaRequest } from './schema';

export interface BaseParams {
    safetySettings?: SafetySetting[];
    generationConfig?: GenerationConfig;
}

export interface ModelParams extends BaseParams {
    model: string;
    tools?: Tool[];
    toolConfig?: ToolConfig;
    systemInstruction?: string | Part | Content;
}

export interface LiveModelParams {
    model: string;
    generationConfig?: LiveGenerationConfig;
    tools?: Tool[];
    toolConfig?: ToolConfig;
    systemInstruction?: string | Part | Content;
}

export interface GenerateContentRequest extends BaseParams {
    contents: Content[];
    tools?: Tool[];
    toolConfig?: ToolConfig;
    systemInstruction?: string | Part | Content;
}

export interface SafetySetting {
    category: HarmCategory;
    threshold: HarmBlockThreshold;
    
    method?: HarmBlockMethod;
}

export interface GenerationConfig {
    candidateCount?: number;
    stopSequences?: string[];
    maxOutputTokens?: number;
    temperature?: number;
    topP?: number;
    topK?: number;
    presencePenalty?: number;
    frequencyPenalty?: number;
    
    responseMimeType?: string;
    
    responseSchema?: TypedSchema | SchemaRequest;
    
    responseModalities?: ResponseModality[];
    
    thinkingConfig?: ThinkingConfig;
}

export interface LiveGenerationConfig {
    
    speechConfig?: SpeechConfig;
    
    maxOutputTokens?: number;
    
    temperature?: number;
    
    topP?: number;
    
    topK?: number;
    
    presencePenalty?: number;
    
    frequencyPenalty?: number;
    
    responseModalities?: ResponseModality[];
}

export interface StartChatParams extends BaseParams {
    history?: Content[];
    tools?: Tool[];
    toolConfig?: ToolConfig;
    systemInstruction?: string | Part | Content;
}

export interface CountTokensRequest {
    contents: Content[];
    
    systemInstruction?: string | Part | Content;
    
    tools?: Tool[];
    
    generationConfig?: GenerationConfig;
}

export interface RequestOptions {
    
    timeout?: number;
    
    baseUrl?: string;
}

export type Tool = FunctionDeclarationsTool | GoogleSearchTool | CodeExecutionTool | URLContextTool;

export interface FunctionDeclaration {
    
    name: string;
    
    description: string;
    
    parameters?: ObjectSchema | ObjectSchemaRequest;
}

export interface GoogleSearchTool {
    
    googleSearch: GoogleSearch;
}

export interface CodeExecutionTool {
    
    codeExecution: {};
}

export interface GoogleSearch {
}

export interface URLContextTool {
    
    urlContext: URLContext;
}

export interface URLContext {
}

export interface FunctionDeclarationsTool {
    
    functionDeclarations?: FunctionDeclaration[];
}

export interface ToolConfig {
    functionCallingConfig?: FunctionCallingConfig;
}

export interface FunctionCallingConfig {
    mode?: FunctionCallingMode;
    allowedFunctionNames?: string[];
}

export interface OnDeviceParams {
    createOptions?: LanguageModelCreateOptions;
    promptOptions?: LanguageModelPromptOptions;
}

export interface HybridParams {
    
    mode: InferenceMode;
    
    onDeviceParams?: OnDeviceParams;
    
    inCloudParams?: ModelParams;
}

export interface ThinkingConfig {
    
    thinkingBudget?: number;
    
    includeThoughts?: boolean;
}

export interface PrebuiltVoiceConfig {
    
    voiceName?: string;
}

export interface VoiceConfig {
    
    prebuiltVoiceConfig?: PrebuiltVoiceConfig;
}

export interface SpeechConfig {
    
    voiceConfig?: VoiceConfig;
}
