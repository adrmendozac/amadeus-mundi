

import {getNavigationEntry} from './getNavigationEntry.js';
import {LoadState} from '../types.js';

export const getLoadState = (timestamp: number): LoadState => {
  if (document.readyState === 'loading') {
    
    
    return 'loading';
  } else {
    const navigationEntry = getNavigationEntry();
    if (navigationEntry) {
      if (timestamp < navigationEntry.domInteractive) {
        return 'loading';
      } else if (
        navigationEntry.domContentLoadedEventStart === 0 ||
        timestamp < navigationEntry.domContentLoadedEventStart
      ) {
        
        
        return 'dom-interactive';
      } else if (
        navigationEntry.domComplete === 0 ||
        timestamp < navigationEntry.domComplete
      ) {
        
        
        return 'dom-content-loaded';
      }
    }
  }
  
  
  
  return 'complete';
};
