

let firstHiddenTime = document.visibilityState === 'hidden' ? 0 : Infinity;

const onVisibilityChange = (event: Event) => {
  if (document.visibilityState === 'hidden') {
    firstHiddenTime = event.timeStamp;
    removeEventListener('visibilitychange', onVisibilityChange, true);
  }
};


addEventListener('visibilitychange', onVisibilityChange, true);

export const getFirstHiddenTime = () => firstHiddenTime;
