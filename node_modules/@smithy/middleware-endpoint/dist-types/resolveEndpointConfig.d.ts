import type { Endpoint, EndpointParameters, EndpointV2, Logger, Provider, UrlParser } from "@smithy/types";

export interface EndpointInputConfig<T extends EndpointParameters = EndpointParameters> {
    
    endpoint?: string | Endpoint | Provider<Endpoint> | EndpointV2 | Provider<EndpointV2>;
    
    endpointProvider?: (params: T, context?: {
        logger?: Logger;
    }) => EndpointV2;
    
    tls?: boolean;
    
    useDualstackEndpoint?: boolean | Provider<boolean>;
    
    useFipsEndpoint?: boolean | Provider<boolean>;
    
    serviceConfiguredEndpoint?: never;
}

interface PreviouslyResolved<T extends EndpointParameters = EndpointParameters> {
    urlParser: UrlParser;
    endpointProvider: (params: T, context?: {
        logger?: Logger;
    }) => EndpointV2;
    logger?: Logger;
    serviceId?: string;
}

export interface EndpointResolvedConfig<T extends EndpointParameters = EndpointParameters> {
    
    endpoint?: Provider<Endpoint>;
    endpointProvider: (params: T, context?: {
        logger?: Logger;
    }) => EndpointV2;
    
    tls: boolean;
    
    isCustomEndpoint?: boolean;
    
    useDualstackEndpoint: Provider<boolean>;
    
    useFipsEndpoint: Provider<boolean>;
    
    serviceId?: string;
    
    serviceConfiguredEndpoint?: Provider<string | undefined>;
}

export declare const resolveEndpointConfig: <T, P extends EndpointParameters = EndpointParameters>(input: T & EndpointInputConfig<P> & PreviouslyResolved<P>) => T & EndpointResolvedConfig<P>;
export {};
